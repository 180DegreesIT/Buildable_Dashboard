<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buildable Approvals ‚Äî Business Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,600;0,9..144,700;1,9..144,400&display=swap" rel="stylesheet">
<style>
/* ===== CSS VARIABLES ===== */
:root {
  --bg-app: #f8f7f4;
  --bg-sidebar: #1a1a2e;
  --bg-sidebar-hover: #25254a;
  --bg-sidebar-active: #2d2d5e;
  --bg-card: #ffffff;
  --bg-card-alt: #faf9f7;
  --text-primary: #1a1a2e;
  --text-secondary: #6b6b80;
  --text-sidebar: #b8b8cc;
  --text-sidebar-active: #ffffff;
  --accent-primary: #e8744f;
  --accent-primary-light: #fef0eb;
  --accent-secondary: #5b6abf;
  --accent-secondary-light: #eef0ff;
  --accent-success: #2cb67d;
  --accent-success-light: #e8f8f0;
  --accent-warning: #f0a830;
  --accent-warning-light: #fef6e6;
  --accent-danger: #e05252;
  --accent-danger-light: #fdeaea;
  --border-light: #eae8e4;
  --border-medium: #d8d6d0;
  --shadow-sm: 0 1px 3px rgba(26,26,46,0.04);
  --shadow-md: 0 4px 12px rgba(26,26,46,0.06);
  --shadow-lg: 0 8px 30px rgba(26,26,46,0.08);
  --shadow-card: 0 1px 4px rgba(26,26,46,0.04), 0 4px 16px rgba(26,26,46,0.03);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --sidebar-width: 260px;
  --header-height: 68px;
  --font-display: 'Fraunces', serif;
  --font-body: 'DM Sans', sans-serif;
}

/* ===== RESET & BASE ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 15px; scroll-behavior: smooth; }
body {
  font-family: var(--font-body);
  color: var(--text-primary);
  background: var(--bg-app);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  overflow: hidden;
  height: 100vh;
}

/* ===== LAYOUT ===== */
.app-layout {
  display: flex;
  height: 100vh;
}

/* ===== SIDEBAR ===== */
.sidebar {
  width: var(--sidebar-width);
  background: var(--bg-sidebar);
  display: flex;
  flex-direction: column;
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  z-index: 100;
  transition: transform 0.3s ease;
}

.sidebar-brand {
  padding: 24px 24px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.sidebar-brand h1 {
  font-family: var(--font-display);
  font-size: 1.35rem;
  font-weight: 700;
  color: #fff;
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.sidebar-brand span {
  display: block;
  font-family: var(--font-body);
  font-size: 0.72rem;
  color: var(--text-sidebar);
  font-weight: 400;
  margin-top: 4px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.sidebar-nav {
  flex: 1;
  overflow-y: auto;
  padding: 16px 12px;
}

.nav-section-label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: rgba(184,184,204,0.5);
  padding: 16px 12px 6px;
  font-weight: 600;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  border-radius: var(--radius-sm);
  color: var(--text-sidebar);
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 0.88rem;
  font-weight: 400;
  position: relative;
  user-select: none;
  margin-bottom: 2px;
}

.nav-item:hover {
  background: var(--bg-sidebar-hover);
  color: #e0e0f0;
}

.nav-item.active {
  background: var(--bg-sidebar-active);
  color: var(--text-sidebar-active);
  font-weight: 500;
}

.nav-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 8px;
  bottom: 8px;
  width: 3px;
  background: var(--accent-primary);
  border-radius: 0 3px 3px 0;
}

.nav-icon {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  opacity: 0.7;
}

.nav-item.active .nav-icon { opacity: 1; }

.nav-badge {
  margin-left: auto;
  background: var(--accent-danger);
  color: #fff;
  font-size: 0.65rem;
  font-weight: 600;
  padding: 2px 7px;
  border-radius: 10px;
  line-height: 1.4;
}

.sidebar-footer {
  padding: 16px 20px;
  border-top: 1px solid rgba(255,255,255,0.06);
}

.sidebar-user {
  display: flex;
  align-items: center;
  gap: 10px;
}

.sidebar-user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--accent-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 0.75rem;
  font-weight: 600;
}

.sidebar-user-info {
  flex: 1;
}

.sidebar-user-name {
  color: #fff;
  font-size: 0.82rem;
  font-weight: 500;
}

.sidebar-user-role {
  color: var(--text-sidebar);
  font-size: 0.7rem;
}

/* ===== MAIN CONTENT ===== */
.main-content {
  margin-left: var(--sidebar-width);
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* ===== HEADER ===== */
.header {
  height: var(--header-height);
  background: var(--bg-card);
  border-bottom: 1px solid var(--border-light);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 32px;
  flex-shrink: 0;
  position: sticky;
  top: 0;
  z-index: 50;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.header-title {
  font-family: var(--font-display);
  font-size: 1.3rem;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: -0.02em;
}

.header-subtitle {
  font-size: 0.82rem;
  color: var(--text-secondary);
}

.header-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.week-selector {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-app);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  padding: 7px 14px;
  font-size: 0.82rem;
  color: var(--text-primary);
  cursor: pointer;
  font-family: var(--font-body);
  font-weight: 500;
  transition: border-color 0.15s;
}

.week-selector:hover { border-color: var(--border-medium); }

.header-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 14px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
  background: var(--bg-card);
  color: var(--text-secondary);
  font-size: 0.8rem;
  font-family: var(--font-body);
  cursor: pointer;
  transition: all 0.15s;
  font-weight: 500;
}

.header-btn:hover {
  border-color: var(--border-medium);
  color: var(--text-primary);
  background: var(--bg-app);
}

.header-btn-primary {
  background: var(--accent-primary);
  color: #fff;
  border-color: var(--accent-primary);
}

.header-btn-primary:hover {
  background: #d5663f;
  border-color: #d5663f;
  color: #fff;
}

.sync-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.75rem;
  color: var(--accent-success);
}

.sync-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--accent-success);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* ===== PAGE CONTENT ===== */
.page-content {
  flex: 1;
  overflow-y: auto;
  padding: 28px 32px 48px;
}

.page { display: none; }
.page.active { display: block; animation: fadeIn 0.25s ease; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== KPI CARDS ===== */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 28px;
}

.kpi-card {
  background: var(--bg-card);
  border-radius: var(--radius-md);
  padding: 20px 22px;
  box-shadow: var(--shadow-card);
  border: 1px solid var(--border-light);
  transition: box-shadow 0.2s, transform 0.2s;
}

.kpi-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.kpi-label {
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text-secondary);
  margin-bottom: 8px;
  font-weight: 500;
}

.kpi-value {
  font-family: var(--font-display);
  font-size: 1.65rem;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.kpi-subtext {
  font-size: 0.78rem;
  color: var(--text-secondary);
  margin-top: 6px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.kpi-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 2px 8px;
  border-radius: 20px;
  font-size: 0.72rem;
  font-weight: 600;
}

.kpi-badge.positive { background: var(--accent-success-light); color: var(--accent-success); }
.kpi-badge.negative { background: var(--accent-danger-light); color: var(--accent-danger); }
.kpi-badge.warning { background: var(--accent-warning-light); color: #b07a15; }
.kpi-badge.info { background: var(--accent-secondary-light); color: var(--accent-secondary); }

/* ===== SECTION GRID ===== */
.section-grid {
  display: grid;
  gap: 20px;
  margin-bottom: 28px;
}

.grid-2 { grid-template-columns: 1fr 1fr; }
.grid-3 { grid-template-columns: 1fr 1fr 1fr; }
.grid-1-2 { grid-template-columns: 1fr 2fr; }
.grid-2-1 { grid-template-columns: 2fr 1fr; }
.grid-3-2 { grid-template-columns: 3fr 2fr; }

/* ===== CARDS ===== */
.card {
  background: var(--bg-card);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-card);
  border: 1px solid var(--border-light);
  overflow: hidden;
}

.card-header {
  padding: 18px 22px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border-light);
}

.card-title {
  font-family: var(--font-display);
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: -0.01em;
}

.card-action {
  font-size: 0.75rem;
  color: var(--accent-primary);
  cursor: pointer;
  font-weight: 500;
  text-decoration: none;
  transition: color 0.15s;
}

.card-action:hover { color: #d5663f; }

.card-body { padding: 20px 22px; }

/* ===== TABLES ===== */
.data-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.84rem;
}

.data-table th {
  text-align: left;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text-secondary);
  font-weight: 600;
  padding: 10px 14px;
  border-bottom: 1px solid var(--border-light);
  background: var(--bg-card-alt);
}

.data-table td {
  padding: 11px 14px;
  border-bottom: 1px solid var(--border-light);
  color: var(--text-primary);
}

.data-table tr:last-child td { border-bottom: none; }
.data-table tr:hover td { background: rgba(248,247,244,0.5); }
.data-table .num { text-align: right; font-variant-numeric: tabular-nums; }
.data-table .bold { font-weight: 600; }

/* ===== PROGRESS BAR ===== */
.progress-bar {
  height: 8px;
  background: var(--bg-app);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.8s cubic-bezier(0.4,0,0.2,1);
}

.progress-fill.green { background: var(--accent-success); }
.progress-fill.orange { background: var(--accent-warning); }
.progress-fill.red { background: var(--accent-danger); }
.progress-fill.blue { background: var(--accent-secondary); }
.progress-fill.coral { background: var(--accent-primary); }

/* ===== CHARTS (SVG based) ===== */
.chart-container {
  width: 100%;
  padding: 12px 0;
}

.chart-container svg {
  width: 100%;
  height: auto;
}

/* ===== ALERT PANEL ===== */
.alert-panel {
  border-radius: var(--radius-md);
  padding: 16px 20px;
  margin-bottom: 20px;
  display: flex;
  align-items: flex-start;
  gap: 14px;
  font-size: 0.84rem;
}

.alert-panel.alert-warning {
  background: var(--accent-warning-light);
  border: 1px solid #f0d89050;
}

.alert-panel.alert-danger {
  background: var(--accent-danger-light);
  border: 1px solid #e0525230;
}

.alert-panel.alert-success {
  background: var(--accent-success-light);
  border: 1px solid #2cb67d30;
}

.alert-icon { font-size: 1.2rem; flex-shrink: 0; margin-top: 1px; }
.alert-content { flex: 1; }
.alert-title { font-weight: 600; margin-bottom: 2px; }
.alert-text { color: var(--text-secondary); font-size: 0.8rem; }

/* ===== TABS ===== */
.tabs {
  display: flex;
  gap: 4px;
  border-bottom: 1px solid var(--border-light);
  margin-bottom: 20px;
}

.tab {
  padding: 10px 18px;
  font-size: 0.84rem;
  color: var(--text-secondary);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  transition: all 0.15s;
  font-weight: 500;
  font-family: var(--font-body);
  background: none;
  border-top: none;
  border-left: none;
  border-right: none;
}

.tab:hover { color: var(--text-primary); }
.tab.active {
  color: var(--accent-primary);
  border-bottom-color: var(--accent-primary);
}

/* ===== TOGGLE ===== */
.toggle-container {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.82rem;
  color: var(--text-secondary);
}

.toggle {
  width: 40px;
  height: 22px;
  background: var(--border-medium);
  border-radius: 11px;
  position: relative;
  cursor: pointer;
  transition: background 0.2s;
}

.toggle.active { background: var(--accent-primary); }

.toggle::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 16px;
  height: 16px;
  background: #fff;
  border-radius: 50%;
  transition: transform 0.2s;
  box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}

.toggle.active::after { transform: translateX(18px); }

/* ===== UPLOAD ZONE ===== */
.upload-zone {
  border: 2px dashed var(--border-medium);
  border-radius: var(--radius-lg);
  padding: 48px 32px;
  text-align: center;
  transition: all 0.2s;
  cursor: pointer;
  background: var(--bg-card-alt);
}

.upload-zone:hover {
  border-color: var(--accent-primary);
  background: var(--accent-primary-light);
}

.upload-icon { font-size: 2.5rem; margin-bottom: 12px; opacity: 0.5; }
.upload-title { font-weight: 600; font-size: 1rem; margin-bottom: 4px; }
.upload-text { font-size: 0.82rem; color: var(--text-secondary); }

/* ===== FORM ELEMENTS ===== */
.form-group { margin-bottom: 18px; }

.form-label {
  display: block;
  font-size: 0.78rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 6px;
}

.form-input, .form-select {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: 0.88rem;
  color: var(--text-primary);
  background: var(--bg-card);
  transition: border-color 0.15s;
}

.form-input:focus, .form-select:focus {
  outline: none;
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 3px var(--accent-primary-light);
}

/* ===== PERMISSION GRID ===== */
.perm-grid {
  display: grid;
  grid-template-columns: 200px repeat(4, 1fr);
  gap: 0;
  font-size: 0.8rem;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.perm-cell {
  padding: 10px 14px;
  border-bottom: 1px solid var(--border-light);
  border-right: 1px solid var(--border-light);
  display: flex;
  align-items: center;
  justify-content: center;
}

.perm-cell:last-child { border-right: none; }
.perm-cell.header {
  background: var(--bg-card-alt);
  font-weight: 600;
  color: var(--text-secondary);
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.perm-cell.label {
  justify-content: flex-start;
  font-weight: 500;
}

.perm-dot {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 2px solid var(--border-medium);
  cursor: pointer;
  transition: all 0.15s;
}

.perm-dot.active-read { background: var(--accent-secondary); border-color: var(--accent-secondary); }
.perm-dot.active-write { background: var(--accent-success); border-color: var(--accent-success); }
.perm-dot.active-none { background: var(--border-medium); border-color: var(--border-medium); }

/* ===== STAT BAR ===== */
.stat-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.stat-bar-label {
  width: 140px;
  font-size: 0.82rem;
  color: var(--text-primary);
  flex-shrink: 0;
}

.stat-bar-track {
  flex: 1;
  height: 28px;
  background: var(--bg-app);
  border-radius: var(--radius-sm);
  position: relative;
  overflow: hidden;
}

.stat-bar-fill {
  height: 100%;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 10px;
  font-size: 0.72rem;
  font-weight: 600;
  color: #fff;
  transition: width 1s cubic-bezier(0.4,0,0.2,1);
  min-width: 40px;
}

.stat-bar-target {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--text-primary);
  opacity: 0.3;
}

.stat-bar-value {
  width: 65px;
  text-align: right;
  font-size: 0.82rem;
  font-weight: 600;
  flex-shrink: 0;
}

/* ===== MINI SPARKLINE ===== */
.sparkline { display: inline-block; vertical-align: middle; }

/* ===== MAPPING STEP ===== */
.mapping-row {
  display: grid;
  grid-template-columns: 1fr 60px 1fr;
  gap: 12px;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--border-light);
}

.mapping-arrow {
  text-align: center;
  color: var(--accent-primary);
  font-size: 1.2rem;
}

.mapping-source, .mapping-target {
  padding: 8px 14px;
  border-radius: var(--radius-sm);
  font-size: 0.84rem;
}

.mapping-source {
  background: var(--accent-secondary-light);
  color: var(--accent-secondary);
  font-weight: 500;
}

.mapping-target {
  background: var(--accent-primary-light);
  color: var(--accent-primary);
  font-weight: 500;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 1200px) {
  .grid-2, .grid-3, .grid-1-2, .grid-2-1, .grid-3-2 {
    grid-template-columns: 1fr;
  }
  .kpi-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
}

/* ===== TOOLTIP ===== */
.tooltip-trigger {
  position: relative;
  cursor: help;
  border-bottom: 1px dashed var(--text-secondary);
}

.tooltip-trigger:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--text-primary);
  color: #fff;
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  white-space: nowrap;
  z-index: 200;
  font-weight: 400;
  line-height: 1.4;
  margin-bottom: 6px;
  max-width: 280px;
  white-space: normal;
}

/* ===== PILL TAGS ===== */
.pill {
  display: inline-flex;
  align-items: center;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 0.72rem;
  font-weight: 600;
}

.pill-green { background: var(--accent-success-light); color: var(--accent-success); }
.pill-red { background: var(--accent-danger-light); color: var(--accent-danger); }
.pill-orange { background: var(--accent-warning-light); color: #b07a15; }
.pill-blue { background: var(--accent-secondary-light); color: var(--accent-secondary); }

/* ===== EMPTY STATE ===== */
.empty-state {
  text-align: center;
  padding: 60px 32px;
  color: var(--text-secondary);
}

.empty-state-icon { font-size: 3rem; opacity: 0.3; margin-bottom: 16px; }
.empty-state-title { font-family: var(--font-display); font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; }
.empty-state-text { font-size: 0.88rem; max-width: 400px; margin: 0 auto; }

/* ===== SCROLLBAR ===== */
.page-content::-webkit-scrollbar { width: 6px; }
.page-content::-webkit-scrollbar-track { background: transparent; }
.page-content::-webkit-scrollbar-thumb { background: var(--border-medium); border-radius: 3px; }
.page-content::-webkit-scrollbar-thumb:hover { background: var(--text-secondary); }
.sidebar-nav::-webkit-scrollbar { width: 4px; }
.sidebar-nav::-webkit-scrollbar-track { background: transparent; }
.sidebar-nav::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

/* ===== MISC ===== */
.section-title {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 16px;
  letter-spacing: -0.01em;
}

.divider {
  height: 1px;
  background: var(--border-light);
  margin: 24px 0;
}

.text-green { color: var(--accent-success); }
.text-red { color: var(--accent-danger); }
.text-orange { color: var(--accent-warning); }
.text-muted { color: var(--text-secondary); }

.flex { display: flex; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-8 { gap: 8px; }
.gap-16 { gap: 16px; }
.gap-24 { gap: 24px; }
.mb-4 { margin-bottom: 4px; }
.mb-8 { margin-bottom: 8px; }
.mb-16 { margin-bottom: 16px; }
.mb-24 { margin-bottom: 24px; }
.mt-8 { margin-top: 8px; }
.mt-16 { margin-top: 16px; }
.fw-600 { font-weight: 600; }

/* ===== CHART BARS (CSS) ===== */
.bar-chart { display: flex; align-items: flex-end; gap: 8px; height: 200px; padding-top: 10px; }
.bar-group { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px; height: 100%; justify-content: flex-end; }
.bar {
  width: 100%;
  max-width: 40px;
  border-radius: 4px 4px 0 0;
  transition: height 0.8s cubic-bezier(0.4,0,0.2,1);
  position: relative;
}
.bar-label {
  font-size: 0.65rem;
  color: var(--text-secondary);
  text-align: center;
  white-space: nowrap;
}
.bar-value {
  font-size: 0.65rem;
  font-weight: 600;
  color: var(--text-primary);
  text-align: center;
}

/* ===== STACKED BAR ===== */
.stacked-bars { display: flex; align-items: flex-end; gap: 16px; height: 180px; }
.stacked-group { flex: 1; display: flex; flex-direction: column; align-items: center; height: 100%; justify-content: flex-end; }
.stacked-bar { width: 100%; max-width: 50px; display: flex; flex-direction: column; justify-content: flex-end; }
.stacked-segment { width: 100%; transition: height 0.8s cubic-bezier(0.4,0,0.2,1); }
.stacked-segment:first-child { border-radius: 4px 4px 0 0; }

/* ===== DONUT CHART (CSS) ===== */
.donut-chart {
  width: 160px;
  height: 160px;
  border-radius: 50%;
  position: relative;
  margin: 0 auto;
}

.donut-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

.donut-center-value {
  font-family: var(--font-display);
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--text-primary);
}

.donut-center-label {
  font-size: 0.72rem;
  color: var(--text-secondary);
}

/* ===== LEGEND ===== */
.legend { display: flex; flex-wrap: wrap; gap: 14px; margin-top: 14px; }
.legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.78rem; color: var(--text-secondary); }
.legend-dot { width: 10px; height: 10px; border-radius: 3px; flex-shrink: 0; }

/* ===== REVIEW STARS ===== */
.stars { color: var(--accent-warning); letter-spacing: 2px; font-size: 1.1rem; }

/* ===== STEP INDICATOR ===== */
.steps {
  display: flex;
  gap: 0;
  margin-bottom: 28px;
}

.step {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 18px;
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  position: relative;
}

.step:first-child { border-radius: var(--radius-sm) 0 0 var(--radius-sm); }
.step:last-child { border-radius: 0 var(--radius-sm) var(--radius-sm) 0; }

.step.active {
  background: var(--accent-primary-light);
  border-color: var(--accent-primary);
  z-index: 1;
}

.step.done {
  background: var(--accent-success-light);
  border-color: var(--accent-success);
}

.step-num {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--border-light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--text-secondary);
  flex-shrink: 0;
}

.step.active .step-num { background: var(--accent-primary); color: #fff; }
.step.done .step-num { background: var(--accent-success); color: #fff; }

.step-label {
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--text-secondary);
}

.step.active .step-label { color: var(--accent-primary); }
.step.done .step-label { color: var(--accent-success); }

/* ===== NET REVENUE TOGGLE ===== */
.net-revenue-toggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 14px;
  background: var(--bg-app);
  border-radius: 20px;
  font-size: 0.78rem;
  color: var(--text-secondary);
  border: 1px solid var(--border-light);
}
</style>
</head>
<body>
<div class="app-layout">

<!-- ===== SIDEBAR ===== -->
<aside class="sidebar">
  <div class="sidebar-brand">
    <h1>Buildable</h1>
    <span>Business Dashboard</span>
  </div>
  <nav class="sidebar-nav">
    <div class="nav-section-label">Dashboards</div>
    <div class="nav-item active" data-page="executive" onclick="showPage('executive')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
      Executive Summary
    </div>
    <div class="nav-item" data-page="financial" onclick="showPage('financial')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
      Financial Deep Dive
    </div>
    <div class="nav-item" data-page="sales" onclick="showPage('sales')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      Sales &amp; Pipeline
    </div>
    <div class="nav-item" data-page="marketing" onclick="showPage('marketing')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
      Marketing &amp; Leads
      <span class="nav-badge">3</span>
    </div>
    <div class="nav-item" data-page="operations" onclick="showPage('operations')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      Operations
    </div>
    <div class="nav-item" data-page="regional" onclick="showPage('regional')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
      Regional Performance
    </div>

    <div class="nav-section-label">Management</div>
    <div class="nav-item" data-page="data" onclick="showPage('data')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
      Data Management
    </div>
    <div class="nav-item" data-page="targets" onclick="showPage('targets')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
      Target Management
    </div>
    <div class="nav-item" data-page="admin" onclick="showPage('admin')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
      Admin Settings
    </div>
    <div class="nav-item" data-page="users" onclick="showPage('users')">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      Users &amp; Permissions
    </div>
  </nav>
  <div class="sidebar-footer">
    <div class="sidebar-user">
      <div class="sidebar-user-avatar">DM</div>
      <div class="sidebar-user-info">
        <div class="sidebar-user-name">Di Mitchell</div>
        <div class="sidebar-user-role">Executive</div>
      </div>
    </div>
  </div>
</aside>

<!-- ===== MAIN CONTENT ===== -->
<main class="main-content">

<!-- HEADER -->
<header class="header">
  <div class="header-left">
    <h2 class="header-title" id="page-title">Executive Summary</h2>
    <span class="header-subtitle" id="page-subtitle">Week 30 ‚Äî w/e 25 Jan 2025</span>
  </div>
  <div class="header-right">
    <div class="sync-indicator"><span class="sync-dot"></span> Xero synced</div>
    <div class="net-revenue-toggle">
      <div class="toggle" id="netRevToggle" onclick="this.classList.toggle('active')"></div>
      <span>Net Revenue</span>
    </div>
    <select class="week-selector" id="weekSelector">
      <option>Wk 31 ‚Äî 02/02/2025</option>
      <option selected>Wk 30 ‚Äî 26/01/2025</option>
      <option>Wk 29 ‚Äî 19/01/2025</option>
      <option>Wk 28 ‚Äî 12/01/2025</option>
      <option>Wk 27 ‚Äî 05/01/2025</option>
    </select>
    <button class="header-btn" onclick="alert('CSV export triggered')">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      CSV
    </button>
    <button class="header-btn" onclick="alert('PDF export triggered')">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
      PDF
    </button>
  </div>
</header>

<!-- PAGE CONTENT -->
<div class="page-content">

<!-- ========================================== -->
<!-- PAGE: EXECUTIVE SUMMARY -->
<!-- ========================================== -->
<div class="page active" id="page-executive">

  <!-- ALERTS -->
  <div class="alert-panel alert-warning">
    <span class="alert-icon">‚ö†Ô∏è</span>
    <div class="alert-content">
      <div class="alert-title">Town Planning at 26% of weekly target</div>
      <div class="alert-text">Invoiced $3,187.80 against $12,199 target. This team has been below 50% for 3 consecutive weeks.</div>
    </div>
  </div>

  <div class="alert-panel alert-danger">
    <span class="alert-icon">üî¥</span>
    <div class="alert-content">
      <div class="alert-title">Revenue to Staff Ratio at 57%</div>
      <div class="alert-text">Approaching the upper boundary of the 55‚Äì65% benchmark band. Wages at $118,204 against $308,151 trading income.</div>
    </div>
  </div>

  <!-- KPI CARDS -->
  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-label">Net Profit</div>
      <div class="kpi-value">$62,210</div>
      <div class="kpi-subtext">
        <span class="kpi-badge positive">‚ñ≤ +$22,007 vs budget</span>
      </div>
      <div class="kpi-subtext text-muted" style="font-size:0.72rem">Budget: $40,203</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Revenue (Invoiced)</div>
      <div class="kpi-value">$206,428</div>
      <div class="kpi-subtext">
        <span class="kpi-badge info">Resi + Comm + Retro</span>
      </div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label tooltip-trigger" data-tooltip="Total Trading Income from Xero P&L (accrual-based). Differs from Invoiced due to revenue recognition timing.">Revenue (P&amp;L)</div>
      <div class="kpi-value">$308,151</div>
      <div class="kpi-subtext">
        <span class="kpi-badge positive">Variance: +$101,723</span>
      </div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Gross Profit Margin</div>
      <div class="kpi-value">75.5%</div>
      <div class="kpi-subtext">
        <span class="kpi-badge positive">Healthy</span>
      </div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label tooltip-trigger" data-tooltip="(Wages & Salaries / Total Trading Income) √ó 100. Lower is better. Benchmark: 55‚Äì65%">Revenue to Staff Ratio</div>
      <div class="kpi-value">57%</div>
      <div class="kpi-subtext">
        <span class="kpi-badge warning">Within benchmark</span>
      </div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Total Leads</div>
      <div class="kpi-value">285</div>
      <div class="kpi-subtext">
        <span class="kpi-badge positive">$5.52 avg CPL</span>
      </div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Profit Margin</div>
      <div class="kpi-value">27%</div>
      <div class="kpi-subtext">
        <span class="kpi-badge negative">Below 30% target</span>
      </div>
    </div>
  </div>

  <!-- CHARTS ROW -->
  <div class="section-grid grid-3-2 mb-24">
    <!-- Net Profit Trend -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">Net Profit Trend (13 Week Rolling)</div>
        <span class="card-action" onclick="showPage('financial')">View details ‚Üí</span>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <svg viewBox="0 0 600 200" style="overflow:visible">
            <!-- Grid lines -->
            <line x1="60" y1="20" x2="580" y2="20" stroke="#eae8e4" stroke-width="1"/>
            <line x1="60" y1="70" x2="580" y2="70" stroke="#eae8e4" stroke-width="1"/>
            <line x1="60" y1="120" x2="580" y2="120" stroke="#eae8e4" stroke-width="1"/>
            <line x1="60" y1="170" x2="580" y2="170" stroke="#eae8e4" stroke-width="1"/>
            <!-- Y axis labels -->
            <text x="50" y="24" text-anchor="end" fill="#6b6b80" font-size="10" font-family="DM Sans">$120k</text>
            <text x="50" y="74" text-anchor="end" fill="#6b6b80" font-size="10" font-family="DM Sans">$80k</text>
            <text x="50" y="124" text-anchor="end" fill="#6b6b80" font-size="10" font-family="DM Sans">$40k</text>
            <text x="50" y="174" text-anchor="end" fill="#6b6b80" font-size="10" font-family="DM Sans">$0</text>
            <!-- Budget line -->
            <line x1="60" y1="110" x2="580" y2="110" stroke="#e8744f" stroke-width="1.5" stroke-dasharray="6,4" opacity="0.6"/>
            <text x="585" y="114" fill="#e8744f" font-size="9" font-family="DM Sans" opacity="0.8">Budget $40k</text>
            <!-- Actual line (Net Profit trend) -->
            <polyline fill="none" stroke="#5b6abf" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
              points="80,160 120,90 160,140 200,50 240,85 280,100 320,65 360,130 400,75 440,40 480,65 520,80 560,60"/>
            <!-- Fill area -->
            <polygon fill="url(#profitGrad)" opacity="0.15"
              points="80,160 120,90 160,140 200,50 240,85 280,100 320,65 360,130 400,75 440,40 480,65 520,80 560,60 560,170 80,170"/>
            <defs>
              <linearGradient id="profitGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#5b6abf"/>
                <stop offset="100%" stop-color="#5b6abf" stop-opacity="0"/>
              </linearGradient>
            </defs>
            <!-- Current point -->
            <circle cx="560" cy="60" r="5" fill="#5b6abf" stroke="#fff" stroke-width="2"/>
            <!-- X axis labels -->
            <text x="80" y="190" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W18</text>
            <text x="160" y="190" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W20</text>
            <text x="240" y="190" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W22</text>
            <text x="320" y="190" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W24</text>
            <text x="400" y="190" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W26</text>
            <text x="480" y="190" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W28</text>
            <text x="560" y="190" text-anchor="middle" fill="#e8744f" font-size="9" font-weight="600" font-family="DM Sans">W30</text>
          </svg>
        </div>
        <div class="legend">
          <div class="legend-item"><div class="legend-dot" style="background:#5b6abf"></div> Actual Net Profit</div>
          <div class="legend-item"><div class="legend-dot" style="background:#e8744f;border-radius:1px;width:16px;height:2px"></div> Budget ($40,203)</div>
        </div>
      </div>
    </div>

    <!-- Revenue by Category -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">Revenue by Category</div>
      </div>
      <div class="card-body">
        <div class="stacked-bars" style="height:170px">
          <div class="stacked-group">
            <div class="stacked-bar">
              <div class="stacked-segment" style="height:5px;background:var(--accent-warning)"></div>
              <div class="stacked-segment" style="height:40px;background:var(--accent-secondary)"></div>
              <div class="stacked-segment" style="height:10px;background:var(--accent-success)"></div>
            </div>
            <div class="bar-label">W27</div>
          </div>
          <div class="stacked-group">
            <div class="stacked-bar">
              <div class="stacked-segment" style="height:15px;background:var(--accent-warning)"></div>
              <div class="stacked-segment" style="height:30px;background:var(--accent-secondary)"></div>
              <div class="stacked-segment" style="height:80px;background:var(--accent-success)"></div>
            </div>
            <div class="bar-label">W28</div>
          </div>
          <div class="stacked-group">
            <div class="stacked-bar">
              <div class="stacked-segment" style="height:30px;background:var(--accent-warning)"></div>
              <div class="stacked-segment" style="height:110px;background:var(--accent-secondary)"></div>
              <div class="stacked-segment" style="height:120px;background:var(--accent-success)"></div>
            </div>
            <div class="bar-label">W29</div>
          </div>
          <div class="stacked-group">
            <div class="stacked-bar">
              <div class="stacked-segment" style="height:45px;background:var(--accent-warning)"></div>
              <div class="stacked-segment" style="height:50px;background:var(--accent-secondary)"></div>
              <div class="stacked-segment" style="height:120px;background:var(--accent-success)"></div>
            </div>
            <div class="bar-label" style="color:var(--accent-primary);font-weight:600">W30</div>
          </div>
        </div>
        <div class="legend mt-16">
          <div class="legend-item"><div class="legend-dot" style="background:var(--accent-success)"></div> Residential</div>
          <div class="legend-item"><div class="legend-dot" style="background:var(--accent-secondary)"></div> Commercial</div>
          <div class="legend-item"><div class="legend-dot" style="background:var(--accent-warning)"></div> Retrospective</div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROJECT SUMMARY + REGIONAL -->
  <div class="section-grid grid-2 mb-24">
    <!-- Project Summary -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">Project Summary</div>
        <span class="card-action" onclick="showPage('sales')">View pipeline ‚Üí</span>
      </div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead>
            <tr>
              <th>Type</th>
              <th class="num">Target</th>
              <th class="num">Invoiced</th>
              <th class="num">% to Target</th>
              <th class="num">Projects</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="bold">Residential</td>
              <td class="num">$182,348</td>
              <td class="num">$117,039</td>
              <td class="num"><span class="pill pill-orange">64%</span></td>
              <td class="num">132</td>
            </tr>
            <tr>
              <td class="bold">Commercial</td>
              <td class="num">$57,005</td>
              <td class="num">$48,396</td>
              <td class="num"><span class="pill pill-orange">85%</span></td>
              <td class="num">0</td>
            </tr>
            <tr>
              <td class="bold">Retrospective</td>
              <td class="num">$3,492</td>
              <td class="num">$40,993</td>
              <td class="num"><span class="pill pill-green">1,174%</span></td>
              <td class="num">2</td>
            </tr>
            <tr style="background:var(--bg-card-alt)">
              <td class="bold">Total</td>
              <td class="num bold">$242,845</td>
              <td class="num bold">$206,428</td>
              <td class="num"><span class="pill pill-orange">85%</span></td>
              <td class="num bold">134</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Sales Pipeline -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">Sales Pipeline</div>
        <span class="card-action" onclick="showPage('sales')">Details ‚Üí</span>
      </div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead>
            <tr>
              <th>Type</th>
              <th class="num">Quotes Issued</th>
              <th class="num">Value</th>
              <th class="num">Won</th>
              <th class="num">Win Rate</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="bold">Residential</td>
              <td class="num">112</td>
              <td class="num">$186,382</td>
              <td class="num">48</td>
              <td class="num"><span class="pill pill-orange">43%</span></td>
            </tr>
            <tr>
              <td class="bold">Commercial</td>
              <td class="num">29</td>
              <td class="num">$104,874</td>
              <td class="num">21</td>
              <td class="num"><span class="pill pill-green">72%</span></td>
            </tr>
            <tr>
              <td class="bold">Retrospective</td>
              <td class="num">25</td>
              <td class="num">$21,867</td>
              <td class="num">9</td>
              <td class="num"><span class="pill pill-orange">36%</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- REGIONAL PERFORMANCE -->
  <div class="section-title">Regional Team Performance</div>
  <div class="card mb-24">
    <div class="card-header">
      <div class="card-title">Revenue vs Target by Team</div>
      <span class="card-action" onclick="showPage('regional')">Regional deep dive ‚Üí</span>
    </div>
    <div class="card-body">
      <div class="stat-bar">
        <div class="stat-bar-label">NQ Commercial</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:100%;background:var(--accent-success)">220%</div><div class="stat-bar-target" style="left:45%"></div></div>
        <div class="stat-bar-value text-green">$35,821</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">SEQ Residential</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:100%;background:var(--accent-success)">142%</div><div class="stat-bar-target" style="left:70%"></div></div>
        <div class="stat-bar-value text-green">$73,838</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">Mackay</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:82%;background:var(--accent-success)">82%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value">$10,312</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">Townsville</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:70%;background:var(--accent-warning)">70%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value text-orange">$21,340</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">Cairns</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:64%;background:var(--accent-warning)">64%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value text-orange">$24,561</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">SEQ Commercial</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:62%;background:var(--accent-warning)">62%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value text-orange">$12,290</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">Wide Bay</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:59%;background:var(--accent-warning)">59%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value text-orange">$27,954</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">Town Planning</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:26%;background:var(--accent-danger)">26%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value text-red">$3,188</div>
      </div>
      <div class="stat-bar">
        <div class="stat-bar-label">All In Access</div>
        <div class="stat-bar-track"><div class="stat-bar-fill" style="width:1%;background:var(--accent-danger)">0%</div><div class="stat-bar-target" style="left:100%"></div></div>
        <div class="stat-bar-value text-red">$0</div>
      </div>
    </div>
  </div>

  <!-- LEAD SOURCES + GOOGLE REVIEWS -->
  <div class="section-grid grid-2">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Lead Sources</div>
        <span class="card-action" onclick="showPage('marketing')">Marketing ‚Üí</span>
      </div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead>
            <tr><th>Source</th><th class="num">Leads</th><th class="num">Cost/Lead</th></tr>
          </thead>
          <tbody>
            <tr><td>SEO (Organic)</td><td class="num bold">103</td><td class="num">$14.56</td></tr>
            <tr><td>Google Ads</td><td class="num bold">90</td><td class="num">$10.24</td></tr>
            <tr><td>Other</td><td class="num bold">57</td><td class="num">‚Äî</td></tr>
            <tr><td>Bing Ads</td><td class="num bold">22</td><td class="num">$6.12</td></tr>
            <tr><td>TikTok</td><td class="num bold">12</td><td class="num">$17.50</td></tr>
            <tr><td>Meta (Facebook/Instagram)</td><td class="num bold">1</td><td class="num">$307.38</td></tr>
            <tr style="background:var(--bg-card-alt)"><td class="bold">Total</td><td class="num bold">285</td><td class="num bold">$5.52</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">Google Reviews</div>
      </div>
      <div class="card-body" style="text-align:center;padding:32px">
        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <div style="font-family:var(--font-display);font-size:2.5rem;font-weight:700;margin:12px 0 4px">4.8</div>
        <div class="text-muted" style="font-size:0.88rem;margin-bottom:20px">Average Star Rating</div>
        <div style="display:flex;justify-content:center;gap:40px">
          <div>
            <div style="font-family:var(--font-display);font-size:1.8rem;font-weight:700">1</div>
            <div class="text-muted" style="font-size:0.78rem">New this week</div>
          </div>
          <div>
            <div style="font-family:var(--font-display);font-size:1.8rem;font-weight:700">30</div>
            <div class="text-muted" style="font-size:0.78rem">Cumulative total</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: FINANCIAL DEEP DIVE -->
<!-- ========================================== -->
<div class="page" id="page-financial">
  <div class="flex items-center justify-between mb-24">
    <div class="section-title" style="margin-bottom:0">Profit &amp; Loss ‚Äî Week 30</div>
    <div class="flex gap-8">
      <button class="tab active">Weekly</button>
      <button class="tab" onclick="this.classList.toggle('active');this.previousElementSibling.classList.toggle('active')">Monthly</button>
    </div>
  </div>

  <div class="kpi-grid mb-24" style="grid-template-columns:repeat(5,1fr)">
    <div class="kpi-card">
      <div class="kpi-label">Trading Income</div>
      <div class="kpi-value">$308,151</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Cost of Sales</div>
      <div class="kpi-value">$75,488</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Gross Profit</div>
      <div class="kpi-value">$232,664</div>
      <div class="kpi-subtext"><span class="kpi-badge positive">75.5% margin</span></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Operating Expenses</div>
      <div class="kpi-value">$170,453</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Net Profit</div>
      <div class="kpi-value text-green">$62,210</div>
      <div class="kpi-subtext"><span class="kpi-badge positive">+$22,007 vs budget</span></div>
    </div>
  </div>

  <div class="section-grid grid-2 mb-24">
    <div class="card">
      <div class="card-header">
        <div class="card-title">P&amp;L Summary</div>
      </div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead><tr><th>Line Item</th><th class="num">This Week</th><th class="num">YTD</th></tr></thead>
          <tbody>
            <tr><td class="bold">Total Trading Income</td><td class="num bold">$308,151</td><td class="num">$5,605,923</td></tr>
            <tr><td>Cost of Sales</td><td class="num">($75,488)</td><td class="num">($187,567)</td></tr>
            <tr style="background:var(--bg-card-alt)"><td class="bold">Gross Profit</td><td class="num bold">$232,664</td><td class="num bold">$5,418,355</td></tr>
            <tr><td>Other Income</td><td class="num">$0</td><td class="num">$81,772</td></tr>
            <tr><td>Wages &amp; Salaries</td><td class="num">($118,204)</td><td class="num">($3,523,494)</td></tr>
            <tr><td>Other Operating Expenses</td><td class="num">($52,249)</td><td class="num">($1,944,323)</td></tr>
            <tr style="background:var(--accent-success-light)"><td class="bold">Net Profit</td><td class="num bold text-green">$62,210</td><td class="num bold">‚Äî</td></tr>
            <tr><td class="text-muted">Budget</td><td class="num text-muted">$40,203</td><td class="num text-muted">$1,246,294</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">Revenue: Invoiced vs P&amp;L</div>
      </div>
      <div class="card-body">
        <div class="mb-16" style="font-size:0.84rem;color:var(--text-secondary);line-height:1.6">
          <strong>Revenue (Invoiced)</strong> is the sum of Xero invoices issued this week (Residential + Commercial + Retrospective). <strong>Revenue (P&amp;L)</strong> is accrual-based Total Trading Income from Xero. The variance is normal due to revenue recognition timing, credit notes, and adjustments.
        </div>
        <div style="display:flex;gap:20px;margin-bottom:20px">
          <div style="flex:1;padding:16px;background:var(--accent-secondary-light);border-radius:var(--radius-sm);text-align:center">
            <div style="font-size:0.72rem;text-transform:uppercase;color:var(--accent-secondary);font-weight:600;margin-bottom:4px">Invoiced</div>
            <div style="font-family:var(--font-display);font-size:1.4rem;font-weight:700">$206,428</div>
          </div>
          <div style="flex:1;padding:16px;background:var(--accent-primary-light);border-radius:var(--radius-sm);text-align:center">
            <div style="font-size:0.72rem;text-transform:uppercase;color:var(--accent-primary);font-weight:600;margin-bottom:4px">P&amp;L</div>
            <div style="font-family:var(--font-display);font-size:1.4rem;font-weight:700">$308,151</div>
          </div>
        </div>
        <div style="text-align:center;padding:12px;background:var(--bg-card-alt);border-radius:var(--radius-sm)">
          <span class="text-muted" style="font-size:0.82rem">Variance: </span>
          <span style="font-weight:600;color:var(--accent-success)">+$101,723</span>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Cash Position &amp; Receivables</div>
    </div>
    <div class="card-body">
      <div class="kpi-grid" style="grid-template-columns:repeat(4,1fr)">
        <div style="padding:14px;background:var(--bg-card-alt);border-radius:var(--radius-sm);text-align:center">
          <div class="kpi-label">Everyday Account</div>
          <div style="font-family:var(--font-display);font-size:1.2rem;font-weight:700">$145,200</div>
        </div>
        <div style="padding:14px;background:var(--bg-card-alt);border-radius:var(--radius-sm);text-align:center">
          <div class="kpi-label">Tax Savings</div>
          <div style="font-family:var(--font-display);font-size:1.2rem;font-weight:700">$89,400</div>
        </div>
        <div style="padding:14px;background:var(--bg-card-alt);border-radius:var(--radius-sm);text-align:center">
          <div class="kpi-label">Total Cash Available</div>
          <div style="font-family:var(--font-display);font-size:1.2rem;font-weight:700;color:var(--accent-success)">$312,800</div>
        </div>
        <div style="padding:14px;background:var(--bg-card-alt);border-radius:var(--radius-sm);text-align:center">
          <div class="kpi-label">Total Owing (AR)</div>
          <div style="font-family:var(--font-display);font-size:1.2rem;font-weight:700;color:var(--accent-warning)">$478,500</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: SALES & PIPELINE -->
<!-- ========================================== -->
<div class="page" id="page-sales">
  <div class="section-title">Sales &amp; Pipeline ‚Äî Week 30</div>

  <div class="kpi-grid mb-24">
    <div class="kpi-card">
      <div class="kpi-label">Total Quotes Issued</div>
      <div class="kpi-value">166</div>
      <div class="kpi-subtext text-muted">$313,123 total value</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Total Quotes Won</div>
      <div class="kpi-value">78</div>
      <div class="kpi-subtext"><span class="kpi-badge positive">$203,047 value</span></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Overall Win Rate</div>
      <div class="kpi-value">47%</div>
      <div class="kpi-subtext"><span class="kpi-badge warning">Below 50% avg</span></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">New Business %</div>
      <div class="kpi-value">44%</div>
      <div class="kpi-subtext"><span class="kpi-badge positive">Residential</span></div>
    </div>
  </div>

  <div class="section-grid grid-2 mb-24">
    <div class="card">
      <div class="card-header"><div class="card-title">Quotes by Type</div></div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead><tr><th>Type</th><th class="num">Issued #</th><th class="num">Issued $</th><th class="num">Won #</th><th class="num">Won $</th><th class="num">Win %</th></tr></thead>
          <tbody>
            <tr><td class="bold">Residential</td><td class="num">112</td><td class="num">$186,382</td><td class="num">48</td><td class="num">$80,656</td><td class="num"><span class="pill pill-orange">43%</span></td></tr>
            <tr><td class="bold">Commercial</td><td class="num">29</td><td class="num">$104,874</td><td class="num">21</td><td class="num">$99,671</td><td class="num"><span class="pill pill-green">72%</span></td></tr>
            <tr><td class="bold">Retrospective</td><td class="num">25</td><td class="num">$21,867</td><td class="num">9</td><td class="num">$43,985</td><td class="num"><span class="pill pill-orange">36%</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="card-header"><div class="card-title">Conversion Trend (5 Weeks)</div></div>
      <div class="card-body">
        <div class="chart-container">
          <svg viewBox="0 0 400 160" style="overflow:visible">
            <line x1="40" y1="20" x2="380" y2="20" stroke="#eae8e4" stroke-width="1"/>
            <line x1="40" y1="70" x2="380" y2="70" stroke="#eae8e4" stroke-width="1"/>
            <line x1="40" y1="120" x2="380" y2="120" stroke="#eae8e4" stroke-width="1"/>
            <text x="30" y="24" text-anchor="end" fill="#6b6b80" font-size="9" font-family="DM Sans">90%</text>
            <text x="30" y="74" text-anchor="end" fill="#6b6b80" font-size="9" font-family="DM Sans">50%</text>
            <text x="30" y="124" text-anchor="end" fill="#6b6b80" font-size="9" font-family="DM Sans">10%</text>
            <!-- Residential line -->
            <polyline fill="none" stroke="#2cb67d" stroke-width="2" stroke-linecap="round" points="70,55 140,80 210,68 280,70 350,68"/>
            <!-- Commercial line -->
            <polyline fill="none" stroke="#5b6abf" stroke-width="2" stroke-linecap="round" points="70,55 140,85 210,44 280,35 350,35"/>
            <!-- Retro line -->
            <polyline fill="none" stroke="#e8744f" stroke-width="2" stroke-linecap="round" points="70,58 140,30 210,84 280,68 350,72"/>
            <text x="70" y="140" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W27</text>
            <text x="140" y="140" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W28</text>
            <text x="210" y="140" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W29</text>
            <text x="280" y="140" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W30</text>
            <text x="350" y="140" text-anchor="middle" fill="#6b6b80" font-size="9" font-family="DM Sans">W31</text>
          </svg>
        </div>
        <div class="legend">
          <div class="legend-item"><div class="legend-dot" style="background:#2cb67d"></div> Residential</div>
          <div class="legend-item"><div class="legend-dot" style="background:#5b6abf"></div> Commercial</div>
          <div class="legend-item"><div class="legend-dot" style="background:#e8744f"></div> Retrospective</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: MARKETING & LEADS -->
<!-- ========================================== -->
<div class="page" id="page-marketing">
  <div class="section-title">Marketing &amp; Leads ‚Äî Week 30</div>

  <div class="kpi-grid mb-24">
    <div class="kpi-card">
      <div class="kpi-label">Total Leads</div>
      <div class="kpi-value">285</div>
      <div class="kpi-subtext"><span class="kpi-badge positive">‚ñ≤ +11% vs W29</span></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Total Ad Spend</div>
      <div class="kpi-value">$1,572</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Avg Cost Per Lead</div>
      <div class="kpi-value">$5.52</div>
      <div class="kpi-subtext"><span class="kpi-badge positive">‚ñº vs W29 $5.76</span></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Google Reviews</div>
      <div class="kpi-value">1 new</div>
      <div class="kpi-subtext">30 cumulative ¬∑ <span class="stars" style="font-size:0.8rem">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span> 4.8</div>
    </div>
  </div>

  <div class="section-grid grid-2 mb-24">
    <div class="card">
      <div class="card-header"><div class="card-title">Lead Volume by Source</div></div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead><tr><th>Source</th><th class="num">W27</th><th class="num">W28</th><th class="num">W29</th><th class="num">W30</th></tr></thead>
          <tbody>
            <tr><td class="bold">Google Ads</td><td class="num">58</td><td class="num">41</td><td class="num">70</td><td class="num bold">90</td></tr>
            <tr><td class="bold">SEO</td><td class="num">71</td><td class="num">24</td><td class="num">118</td><td class="num bold">103</td></tr>
            <tr><td class="bold">Bing</td><td class="num">18</td><td class="num">9</td><td class="num">26</td><td class="num bold">22</td></tr>
            <tr><td class="bold">TikTok</td><td class="num">12</td><td class="num">10</td><td class="num">11</td><td class="num bold">12</td></tr>
            <tr><td class="bold">Meta</td><td class="num">2</td><td class="num">2</td><td class="num">7</td><td class="num bold">1</td></tr>
            <tr><td class="bold">Other</td><td class="num">25</td><td class="num">5</td><td class="num">25</td><td class="num bold">57</td></tr>
            <tr style="background:var(--bg-card-alt)"><td class="bold">Total</td><td class="num bold">159</td><td class="num bold">91</td><td class="num bold">257</td><td class="num bold">285</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="card-header"><div class="card-title">Cost Per Lead by Channel</div></div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead><tr><th>Channel</th><th class="num">CPL</th><th class="num">Spend</th><th class="num">Trend</th></tr></thead>
          <tbody>
            <tr><td class="bold">Bing Ads</td><td class="num text-green">$6.12</td><td class="num">$135</td><td class="num"><span class="kpi-badge positive">Best CPL</span></td></tr>
            <tr><td class="bold">Google Ads</td><td class="num">$10.24</td><td class="num">$922</td><td class="num"><span class="kpi-badge positive">‚ñº 5%</span></td></tr>
            <tr><td class="bold">SEO</td><td class="num">$14.56</td><td class="num">$1,500</td><td class="num"><span class="kpi-badge positive">‚ñº 14%</span></td></tr>
            <tr><td class="bold">TikTok</td><td class="num">$17.50</td><td class="num">$210</td><td class="num"><span class="kpi-badge positive">‚ñº 19%</span></td></tr>
            <tr><td class="bold">Meta</td><td class="num text-red">$307.38</td><td class="num">$307</td><td class="num"><span class="kpi-badge negative">‚ñ≤ 408%</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="alert-panel alert-warning">
    <span class="alert-icon">‚ÑπÔ∏è</span>
    <div class="alert-content">
      <div class="alert-title">HyperFlo Enquiry Overlap</div>
      <div class="alert-text">HyperFlo enquiry volume reflects the same leads as recorded in HyperFlo's system. These overlap with the lead sources above and should not be added together.</div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: OPERATIONS -->
<!-- ========================================== -->
<div class="page" id="page-operations">
  <div class="section-title">Operations &amp; Productivity ‚Äî Week 30</div>

  <div class="kpi-grid mb-24">
    <div class="kpi-card">
      <div class="kpi-label">Total Approvals</div>
      <div class="kpi-value">134</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Total Invoiced</div>
      <div class="kpi-value">$206,428</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Avg Per Certifier</div>
      <div class="kpi-value">$17,202</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Staff Ratio</div>
      <div class="kpi-value">57%</div>
      <div class="kpi-subtext"><span class="kpi-badge warning">55-65% benchmark</span></div>
    </div>
  </div>

  <div class="card mb-24">
    <div class="card-header">
      <div class="card-title">Staff Productivity</div>
      <span class="text-muted" style="font-size:0.78rem">Certifiers &amp; Cadets</span>
    </div>
    <div class="card-body" style="padding:0">
      <table class="data-table">
        <thead>
          <tr><th>Staff Member</th><th>Role</th><th>Team</th><th class="num">Approvals</th><th class="num">Value</th><th class="num">Inspections</th></tr>
        </thead>
        <tbody>
          <tr><td class="bold">James T.</td><td><span class="pill pill-blue">Certifier</span></td><td>SEQ Residential</td><td class="num">28</td><td class="num">$32,400</td><td class="num">12</td></tr>
          <tr><td class="bold">Sarah K.</td><td><span class="pill pill-blue">Certifier</span></td><td>Cairns</td><td class="num">24</td><td class="num">$24,560</td><td class="num">8</td></tr>
          <tr><td class="bold">Mike L.</td><td><span class="pill pill-blue">Certifier</span></td><td>Townsville</td><td class="num">21</td><td class="num">$21,340</td><td class="num">10</td></tr>
          <tr><td class="bold">David R.</td><td><span class="pill pill-blue">Certifier</span></td><td>Wide Bay</td><td class="num">19</td><td class="num">$27,954</td><td class="num">14</td></tr>
          <tr><td class="bold">Emma W.</td><td><span class="pill pill-green">Cadet</span></td><td>SEQ Residential</td><td class="num">14</td><td class="num">$12,800</td><td class="num">6</td></tr>
          <tr><td class="bold">Tom H.</td><td><span class="pill pill-green">Cadet</span></td><td>Mackay</td><td class="num">10</td><td class="num">$10,312</td><td class="num">5</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Phone Metrics</div>
      <span class="pill pill-blue">3CX Integration ‚Äî Phase 3</span>
    </div>
    <div class="card-body">
      <div class="empty-state">
        <div class="empty-state-icon">üìû</div>
        <div class="empty-state-title">Coming in Phase 3</div>
        <div class="empty-state-text">Phone call data will be automatically pulled from 3CX once the XAPI integration is configured.</div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: REGIONAL PERFORMANCE -->
<!-- ========================================== -->
<div class="page" id="page-regional">
  <div class="section-title">Regional Performance ‚Äî Week 30</div>

  <div class="card mb-24">
    <div class="card-header">
      <div class="card-title">All Teams ‚Äî Revenue vs Target</div>
    </div>
    <div class="card-body" style="padding:0">
      <table class="data-table">
        <thead>
          <tr><th>Region</th><th class="num">Weekly Target</th><th class="num">Actual (Xero)</th><th class="num">% to Target</th><th class="num">YTD Target</th><th class="num">YTD Actual</th><th class="num">YTD %</th></tr>
        </thead>
        <tbody>
          <tr><td class="bold">NQ Commercial</td><td class="num">$16,248</td><td class="num text-green">$35,821</td><td class="num"><span class="pill pill-green">220%</span></td><td class="num">$269,463</td><td class="num">$477,014</td><td class="num"><span class="pill pill-green">177%</span></td></tr>
          <tr><td class="bold">SEQ Residential</td><td class="num">$51,888</td><td class="num text-green">$73,838</td><td class="num"><span class="pill pill-green">142%</span></td><td class="num">$830,208</td><td class="num">$871,128</td><td class="num"><span class="pill pill-green">105%</span></td></tr>
          <tr><td class="bold">Mackay</td><td class="num">$12,620</td><td class="num">$10,312</td><td class="num"><span class="pill pill-green">82%</span></td><td class="num">$201,920</td><td class="num">$95,588</td><td class="num"><span class="pill pill-orange">47%</span></td></tr>
          <tr><td class="bold">Townsville</td><td class="num">$30,572</td><td class="num text-orange">$21,340</td><td class="num"><span class="pill pill-orange">70%</span></td><td class="num">$489,152</td><td class="num">$321,246</td><td class="num"><span class="pill pill-orange">66%</span></td></tr>
          <tr><td class="bold">Cairns</td><td class="num">$38,580</td><td class="num text-orange">$24,561</td><td class="num"><span class="pill pill-orange">64%</span></td><td class="num">$617,280</td><td class="num">$320,557</td><td class="num"><span class="pill pill-orange">52%</span></td></tr>
          <tr><td class="bold">SEQ Commercial</td><td class="num">$19,669</td><td class="num text-orange">$12,290</td><td class="num"><span class="pill pill-orange">62%</span></td><td class="num">$324,199</td><td class="num">$240,014</td><td class="num"><span class="pill pill-orange">74%</span></td></tr>
          <tr><td class="bold">Wide Bay</td><td class="num">$47,352</td><td class="num text-orange">$27,954</td><td class="num"><span class="pill pill-orange">59%</span></td><td class="num">$757,632</td><td class="num">$381,528</td><td class="num"><span class="pill pill-orange">50%</span></td></tr>
          <tr><td class="bold">Town Planning</td><td class="num">$12,199</td><td class="num text-red">$3,188</td><td class="num"><span class="pill pill-red">26%</span></td><td class="num">$195,184</td><td class="num">$64,989</td><td class="num"><span class="pill pill-red">33%</span></td></tr>
          <tr><td class="bold">All In Access</td><td class="num">$13,711</td><td class="num text-red">$0</td><td class="num"><span class="pill pill-red">0%</span></td><td class="num">$219,376</td><td class="num">$74,920</td><td class="num"><span class="pill pill-red">34%</span></td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Queensland Regional Map</div>
      <span class="pill pill-blue">Phase 2 Enhancement</span>
    </div>
    <div class="card-body">
      <div class="empty-state" style="padding:40px">
        <div class="empty-state-icon">üó∫Ô∏è</div>
        <div class="empty-state-title">Interactive Map View</div>
        <div class="empty-state-text">An interactive Queensland map with regional pins showing % to target will be available in Phase 2. Click any region above to drill down into team details.</div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: DATA MANAGEMENT -->
<!-- ========================================== -->
<div class="page" id="page-data">
  <div class="section-title">Data Management</div>

  <!-- UPLOAD STEPS -->
  <div class="steps">
    <div class="step done">
      <div class="step-num">‚úì</div>
      <div class="step-label">Select Data Type</div>
    </div>
    <div class="step active">
      <div class="step-num">2</div>
      <div class="step-label">Upload CSV</div>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <div class="step-label">Map Columns</div>
    </div>
    <div class="step">
      <div class="step-num">4</div>
      <div class="step-label">Review &amp; Confirm</div>
    </div>
  </div>

  <div class="section-grid grid-2 mb-24">
    <div>
      <div class="card mb-24">
        <div class="card-header"><div class="card-title">Upload CSV</div></div>
        <div class="card-body">
          <div class="form-group">
            <label class="form-label">Target Data Type</label>
            <select class="form-select">
              <option>Financial ‚Äî P&L Weekly</option>
              <option>Projects ‚Äî Residential</option>
              <option>Projects ‚Äî Commercial</option>
              <option>Projects ‚Äî Retrospective</option>
              <option>Sales ‚Äî Quotes (All Types)</option>
              <option>Marketing ‚Äî Lead Sources</option>
              <option>Operations ‚Äî Staff Productivity</option>
              <option>Cash Position</option>
            </select>
          </div>
          <div class="upload-zone" onclick="alert('File picker would open here')">
            <div class="upload-icon">üìÅ</div>
            <div class="upload-title">Drop your CSV here</div>
            <div class="upload-text">or click to browse. Supports .csv and .tsv files.</div>
          </div>
          <div class="mt-16 text-muted" style="font-size:0.78rem">
            üí° Saved mapping "<strong>Xero P&L Export</strong>" will be auto-applied if column headers match.
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <div class="card-title">Column Mapping Preview</div>
        </div>
        <div class="card-body">
          <div style="font-size:0.78rem;color:var(--text-secondary);margin-bottom:14px">Mapping: <strong>"Xero P&L Export"</strong> (auto-detected)</div>
          <div class="mapping-row">
            <div class="mapping-source">Total Trading Income</div>
            <div class="mapping-arrow">‚Üí</div>
            <div class="mapping-target">total_trading_income</div>
          </div>
          <div class="mapping-row">
            <div class="mapping-source">Total Cost of Sales</div>
            <div class="mapping-arrow">‚Üí</div>
            <div class="mapping-target">total_cost_of_sales</div>
          </div>
          <div class="mapping-row">
            <div class="mapping-source">Wages and Salaries</div>
            <div class="mapping-arrow">‚Üí</div>
            <div class="mapping-target">wages_and_salaries</div>
          </div>
          <div class="mapping-row">
            <div class="mapping-source">Net Profit</div>
            <div class="mapping-arrow">‚Üí</div>
            <div class="mapping-target">net_profit</div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="card mb-24">
        <div class="card-header"><div class="card-title">Saved Column Mappings</div></div>
        <div class="card-body" style="padding:0">
          <table class="data-table">
            <thead><tr><th>Mapping Name</th><th>Target</th><th>Last Used</th><th></th></tr></thead>
            <tbody>
              <tr><td class="bold">Xero P&L Export</td><td>Financial</td><td class="text-muted">25 Jan 2025</td><td><span class="card-action">Edit</span></td></tr>
              <tr><td class="bold">HyperFlo Weekly Extract</td><td>Projects</td><td class="text-muted">25 Jan 2025</td><td><span class="card-action">Edit</span></td></tr>
              <tr><td class="bold">Reportei Marketing Data</td><td>Marketing</td><td class="text-muted">25 Jan 2025</td><td><span class="card-action">Edit</span></td></tr>
              <tr><td class="bold">Quoting System Export</td><td>Sales</td><td class="text-muted">25 Jan 2025</td><td><span class="card-action">Edit</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <div class="card-title">Recent Uploads</div>
          <span class="text-muted" style="font-size:0.78rem">Last 7 days</span>
        </div>
        <div class="card-body" style="padding:0">
          <table class="data-table">
            <thead><tr><th>File</th><th>Type</th><th>By</th><th class="num">Rows</th><th>Status</th><th></th></tr></thead>
            <tbody>
              <tr><td class="bold">xero-pl-w30.csv</td><td>Financial</td><td>April</td><td class="num">1</td><td><span class="pill pill-green">Complete</span></td><td><span class="card-action">Rollback</span></td></tr>
              <tr><td class="bold">hyperflo-w30.csv</td><td>Projects</td><td>April</td><td class="num">3</td><td><span class="pill pill-green">Complete</span></td><td><span class="card-action">Rollback</span></td></tr>
              <tr><td class="bold">quotes-w30.csv</td><td>Sales</td><td>April</td><td class="num">6</td><td><span class="pill pill-green">Complete</span></td><td><span class="card-action">Rollback</span></td></tr>
              <tr><td class="bold">leads-w30.csv</td><td>Marketing</td><td>April</td><td class="num">7</td><td><span class="pill pill-green">Complete</span></td><td><span class="card-action">Rollback</span></td></tr>
              <tr><td class="bold">regions-w30.csv</td><td>Regional</td><td>April</td><td class="num">9</td><td><span class="pill pill-orange">1 warning</span></td><td><span class="card-action">Rollback</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Xero API Sync</div>
    </div>
    <div class="card-body">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-16">
          <div class="sync-indicator"><span class="sync-dot"></span> Connected</div>
          <span class="text-muted" style="font-size:0.82rem">Last sync: Today 06:00 AM ¬∑ Next sync: Tomorrow 06:00 AM</span>
        </div>
        <button class="header-btn-primary header-btn" onclick="alert('Manual Xero sync triggered')">‚Üª Sync Now</button>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: TARGET MANAGEMENT -->
<!-- ========================================== -->
<div class="page" id="page-targets">
  <div class="section-title">Target Management</div>

  <div class="section-grid grid-2 mb-24">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Company Targets</div>
        <span class="card-action" onclick="alert('Edit target modal')">+ Set New Target</span>
      </div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead><tr><th>Metric</th><th class="num">Weekly Target</th><th class="num">Annual Est.</th><th>Effective From</th></tr></thead>
          <tbody>
            <tr><td class="bold">Net Profit Budget</td><td class="num">$40,203</td><td class="num">$1,246,294</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Residential Revenue</td><td class="num">$182,348</td><td class="num">$5,652,788</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Commercial Revenue</td><td class="num">$57,003</td><td class="num">$1,767,093</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Retrospective Revenue</td><td class="num">$3,490</td><td class="num">$108,190</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Breakeven</td><td class="num">$201,991</td><td class="num">‚Äî</td><td>1 Jul 2024</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">Regional Team Targets</div>
        <span class="card-action" onclick="alert('Bulk edit targets')">Bulk Edit</span>
      </div>
      <div class="card-body" style="padding:0">
        <table class="data-table">
          <thead><tr><th>Team</th><th class="num">Weekly Target</th><th class="num">Annual Est.</th><th>Since</th></tr></thead>
          <tbody>
            <tr><td class="bold">SEQ Residential</td><td class="num">$51,888</td><td class="num">$830,208</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Wide Bay</td><td class="num">$47,352</td><td class="num">$757,632</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Cairns</td><td class="num">$38,580</td><td class="num">$617,280</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Townsville</td><td class="num">$30,572</td><td class="num">$489,152</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">SEQ Commercial</td><td class="num">$19,669</td><td class="num">$324,199</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">NQ Commercial</td><td class="num">$16,248</td><td class="num">$269,463</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">All In Access</td><td class="num">$13,711</td><td class="num">$219,376</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Mackay</td><td class="num">$12,620</td><td class="num">$201,920</td><td>1 Jul 2024</td></tr>
            <tr><td class="bold">Town Planning</td><td class="num">$12,199</td><td class="num">$195,184</td><td>1 Jul 2024</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Change History</div>
      <span class="text-muted" style="font-size:0.78rem">All target modifications are logged</span>
    </div>
    <div class="card-body" style="padding:0">
      <table class="data-table">
        <thead><tr><th>Date</th><th>Target</th><th>Changed By</th><th class="num">Previous</th><th class="num">New</th><th>Reason</th></tr></thead>
        <tbody>
          <tr><td>15 Jan 2025</td><td class="bold">Cairns Target</td><td>Rod</td><td class="num">$35,000</td><td class="num">$38,580</td><td class="text-muted">Q3 review adjustment</td></tr>
          <tr><td>8 Jan 2025</td><td class="bold">Net Profit Budget</td><td>Rod</td><td class="num">$38,500</td><td class="num">$40,203</td><td class="text-muted">Annual budget revision</td></tr>
          <tr><td>1 Jul 2024</td><td class="bold">All Targets</td><td>Rod</td><td class="num">‚Äî</td><td class="num">‚Äî</td><td class="text-muted">FY25 targets set</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: ADMIN SETTINGS -->
<!-- ========================================== -->
<div class="page" id="page-admin">
  <div class="section-title">Admin Settings</div>

  <div class="section-grid grid-2 mb-24">
    <div class="card">
      <div class="card-header"><div class="card-title">Branding</div></div>
      <div class="card-body">
        <div class="form-group">
          <label class="form-label">Company Name</label>
          <input class="form-input" type="text" value="Buildable Approvals Pty Ltd">
        </div>
        <div class="form-group">
          <label class="form-label">Logo</label>
          <div class="upload-zone" style="padding:24px">
            <div class="upload-text">Drop logo image here or click to browse</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Primary Colour</label>
          <div class="flex items-center gap-8">
            <input class="form-input" type="text" value="#e8744f" style="width:120px">
            <div style="width:36px;height:36px;border-radius:var(--radius-sm);background:var(--accent-primary);border:1px solid var(--border-light)"></div>
          </div>
        </div>
        <button class="header-btn header-btn-primary" style="width:100%">Save Branding</button>
      </div>
    </div>

    <div class="card">
      <div class="card-header"><div class="card-title">Alert Thresholds</div></div>
      <div class="card-body">
        <div class="form-group">
          <label class="form-label">Net Profit Below Budget</label>
          <div class="flex items-center gap-8">
            <select class="form-select" style="width:auto">
              <option>2 consecutive weeks</option>
              <option selected>3 consecutive weeks</option>
              <option>4 consecutive weeks</option>
            </select>
            <div class="toggle-container">
              <div class="toggle active"></div>
              <span>Email alert</span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Team Below Target %</label>
          <div class="flex items-center gap-8">
            <input class="form-input" type="number" value="50" style="width:80px">
            <span class="text-muted">% threshold</span>
            <div class="toggle-container">
              <div class="toggle active"></div>
              <span>Email</span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Revenue to Staff Ratio Above</label>
          <div class="flex items-center gap-8">
            <input class="form-input" type="number" value="65" style="width:80px">
            <span class="text-muted">%</span>
            <div class="toggle-container">
              <div class="toggle"></div>
              <span>Email</span>
            </div>
          </div>
        </div>
        <button class="header-btn header-btn-primary" style="width:100%">Save Thresholds</button>
      </div>
    </div>
  </div>

  <div class="section-grid grid-2">
    <div class="card">
      <div class="card-header"><div class="card-title">Pass-Through Items (Net Revenue)</div></div>
      <div class="card-body">
        <div style="font-size:0.82rem;color:var(--text-secondary);margin-bottom:14px">These items are excluded when the Net Revenue toggle is active.</div>
        <div class="flex items-center justify-between" style="padding:8px 0;border-bottom:1px solid var(--border-light)">
          <span>Council Fees</span>
          <div class="toggle active" onclick="this.classList.toggle('active')"></div>
        </div>
        <div class="flex items-center justify-between" style="padding:8px 0;border-bottom:1px solid var(--border-light)">
          <span>Insurance Levy</span>
          <div class="toggle active" onclick="this.classList.toggle('active')"></div>
        </div>
        <div class="flex items-center justify-between" style="padding:8px 0;border-bottom:1px solid var(--border-light)">
          <span>QLeave Sighting Fees</span>
          <div class="toggle active" onclick="this.classList.toggle('active')"></div>
        </div>
        <div class="flex items-center justify-between" style="padding:8px 0">
          <span>Property Searches</span>
          <div class="toggle" onclick="this.classList.toggle('active')"></div>
        </div>
        <button class="header-btn mt-16" style="width:100%" onclick="alert('Add pass-through item')">+ Add Item</button>
      </div>
    </div>

    <div class="card">
      <div class="card-header"><div class="card-title">System Status</div></div>
      <div class="card-body">
        <div class="flex items-center justify-between" style="padding:10px 0;border-bottom:1px solid var(--border-light)">
          <div class="flex items-center gap-8"><div class="sync-dot"></div> <span class="fw-600">Xero API</span></div>
          <span class="pill pill-green">Connected</span>
        </div>
        <div class="flex items-center justify-between" style="padding:10px 0;border-bottom:1px solid var(--border-light)">
          <div class="flex items-center gap-8"><div style="width:7px;height:7px;border-radius:50%;background:var(--border-medium)"></div> <span class="fw-600">3CX XAPI</span></div>
          <span class="pill pill-orange">Phase 3</span>
        </div>
        <div class="flex items-center justify-between" style="padding:10px 0;border-bottom:1px solid var(--border-light)">
          <div class="flex items-center gap-8"><div style="width:7px;height:7px;border-radius:50%;background:var(--border-medium)"></div> <span class="fw-600">Reportei API</span></div>
          <span class="pill pill-orange">Phase 3</span>
        </div>
        <div class="flex items-center justify-between" style="padding:10px 0;border-bottom:1px solid var(--border-light)">
          <div class="flex items-center gap-8"><div class="sync-dot"></div> <span class="fw-600">PostgreSQL</span></div>
          <span class="pill pill-green">Running</span>
        </div>
        <div class="flex items-center justify-between" style="padding:10px 0">
          <div class="flex items-center gap-8"><div class="sync-dot"></div> <span class="fw-600">Last Backup</span></div>
          <span class="text-muted" style="font-size:0.82rem">Today 03:00 AM</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========================================== -->
<!-- PAGE: USERS & PERMISSIONS -->
<!-- ========================================== -->
<div class="page" id="page-users">
  <div class="section-title">Users &amp; Permissions</div>

  <div class="card mb-24">
    <div class="card-header">
      <div class="card-title">Team Directory</div>
      <span class="text-muted" style="font-size:0.78rem">Auto-synced from Microsoft 365</span>
    </div>
    <div class="card-body" style="padding:0">
      <table class="data-table">
        <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Team</th><th>Status</th><th></th></tr></thead>
        <tbody>
          <tr><td class="bold">Rod</td><td class="text-muted">rod@buildable.com.au</td><td><span class="pill pill-red">Super Admin</span></td><td>‚Äî</td><td><span class="pill pill-green">Active</span></td><td><span class="card-action">Edit</span></td></tr>
          <tr><td class="bold">Matt</td><td class="text-muted">matt@buildable.com.au</td><td><span class="pill pill-blue">Executive</span></td><td>‚Äî</td><td><span class="pill pill-green">Active</span></td><td><span class="card-action">Edit</span></td></tr>
          <tr><td class="bold">Grant</td><td class="text-muted">grant@buildable.com.au</td><td><span class="pill pill-blue">Executive</span></td><td>‚Äî</td><td><span class="pill pill-green">Active</span></td><td><span class="card-action">Edit</span></td></tr>
          <tr><td class="bold">Di</td><td class="text-muted">di@buildable.com.au</td><td><span class="pill pill-blue">Executive</span></td><td>Marketing</td><td><span class="pill pill-green">Active</span></td><td><span class="card-action">Edit</span></td></tr>
          <tr><td class="bold">April</td><td class="text-muted">april@buildable.com.au</td><td><span class="pill pill-green">Staff</span></td><td>Admin</td><td><span class="pill pill-green">Active</span></td><td><span class="card-action">Edit</span></td></tr>
          <tr><td class="bold">Tracy</td><td class="text-muted">tracy@buildable.com.au</td><td><span class="pill pill-green">Staff</span></td><td>Finance</td><td><span class="pill pill-green">Active</span></td><td><span class="card-action">Edit</span></td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Page Permission Matrix</div>
      <span class="text-muted" style="font-size:0.78rem">Click to cycle: No Access ‚Üí Read ‚Üí Write</span>
    </div>
    <div class="card-body">
      <div class="perm-grid">
        <div class="perm-cell header label">Page</div>
        <div class="perm-cell header">Rod</div>
        <div class="perm-cell header">Di</div>
        <div class="perm-cell header">April</div>

        <div class="perm-cell label">Executive Summary</div>
        <div class="perm-cell"><div class="perm-dot active-write" title="Write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" title="Read" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" title="Read" onclick="cyclePerm(this)"></div></div>

        <div class="perm-cell label">Financial Deep Dive</div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" onclick="cyclePerm(this)"></div></div>

        <div class="perm-cell label">Sales &amp; Pipeline</div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" onclick="cyclePerm(this)"></div></div>

        <div class="perm-cell label">Marketing &amp; Leads</div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-none" onclick="cyclePerm(this)"></div></div>

        <div class="perm-cell label">Data Management</div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>

        <div class="perm-cell label">Target Management</div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-read" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>

        <div class="perm-cell label">Admin Settings</div>
        <div class="perm-cell"><div class="perm-dot active-write" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-none" onclick="cyclePerm(this)"></div></div>
        <div class="perm-cell"><div class="perm-dot active-none" onclick="cyclePerm(this)"></div></div>
      </div>
      <div class="legend mt-16">
        <div class="legend-item"><div class="legend-dot" style="background:var(--accent-success)"></div> Write</div>
        <div class="legend-item"><div class="legend-dot" style="background:var(--accent-secondary)"></div> Read</div>
        <div class="legend-item"><div class="legend-dot" style="background:var(--border-medium)"></div> No Access</div>
      </div>
    </div>
  </div>
</div>

</div><!-- /page-content -->
</main>
</div><!-- /app-layout -->

<script>
// Page navigation
const pageTitles = {
  executive: ['Executive Summary', 'Week 30 ‚Äî w/e 25 Jan 2025'],
  financial: ['Financial Deep Dive', 'Week 30 ‚Äî w/e 25 Jan 2025'],
  sales: ['Sales & Pipeline', 'Week 30 ‚Äî w/e 25 Jan 2025'],
  marketing: ['Marketing & Leads', 'Week 30 ‚Äî w/e 25 Jan 2025'],
  operations: ['Operations & Productivity', 'Week 30 ‚Äî w/e 25 Jan 2025'],
  regional: ['Regional Performance', 'Week 30 ‚Äî w/e 25 Jan 2025'],
  data: ['Data Management', 'Upload, map & manage data sources'],
  targets: ['Target Management', 'Set & track business targets'],
  admin: ['Admin Settings', 'System configuration & branding'],
  users: ['Users & Permissions', 'Manage access & roles via M365 SSO']
};

function showPage(pageId) {
  // Hide all pages
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  // Show target page
  document.getElementById('page-' + pageId).classList.add('active');
  // Update nav
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.querySelector(`.nav-item[data-page="${pageId}"]`).classList.add('active');
  // Update header
  document.getElementById('page-title').textContent = pageTitles[pageId][0];
  document.getElementById('page-subtitle').textContent = pageTitles[pageId][1];
  // Scroll to top
  document.querySelector('.page-content').scrollTop = 0;
}

// Permission dot cycling
function cyclePerm(el) {
  const states = ['active-none', 'active-read', 'active-write'];
  const titles = ['No Access', 'Read', 'Write'];
  let current = states.findIndex(s => el.classList.contains(s));
  el.classList.remove(states[current]);
  let next = (current + 1) % states.length;
  el.classList.add(states[next]);
  el.title = titles[next];
}

// Animate bars on load
window.addEventListener('load', () => {
  document.querySelectorAll('.stat-bar-fill').forEach(bar => {
    const width = bar.style.width;
    bar.style.width = '0%';
    setTimeout(() => { bar.style.width = width; }, 100);
  });
});
</script>
</body>
</html>
